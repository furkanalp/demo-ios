import{configFromStringAndFormat}from"./from-string-and-format";import{createUTCDate}from"./date-from-array";import{hooks}from"../utils/hooks";import{deprecate}from"../utils/deprecate";import getParsingFlags from"./parsing-flags";import{defaultLocaleMonthsShort}from"../units/month";import{defaultLocaleWeekdaysShort}from"../units/day-of-week";var extendedIsoRegex=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,basicIsoRegex=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,tzRegex=/Z|[+-]\d\d(?::?\d\d)?/,isoDates=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],isoTimes=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],aspNetJsonRegex=/^\/?Date\((-?\d+)/i,rfc2822=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,obsOffsets={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};export function configFromISO(d){var e,s,t,r,a,i,o=d._i,n=extendedIsoRegex.exec(o)||basicIsoRegex.exec(o),c=isoDates.length,f=isoTimes.length;if(n){for(getParsingFlags(d).iso=!0,e=0,s=c;e<s;e++)if(isoDates[e][1].exec(n[1])){r=isoDates[e][0],t=!1!==isoDates[e][2];break}if(null==r)return void(d._isValid=!1);if(n[3]){for(e=0,s=f;e<s;e++)if(isoTimes[e][1].exec(n[3])){a=(n[2]||" ")+isoTimes[e][0];break}if(null==a)return void(d._isValid=!1)}if(!t&&null!=a)return void(d._isValid=!1);if(n[4]){if(!tzRegex.exec(n[4]))return void(d._isValid=!1);i="Z"}d._f=r+(a||"")+(i||""),configFromStringAndFormat(d)}else d._isValid=!1}function extractFromRFC2822Strings(d,e,s,t,r,a){var i=[untruncateYear(d),defaultLocaleMonthsShort.indexOf(e),parseInt(s,10),parseInt(t,10),parseInt(r,10)];return a&&i.push(parseInt(a,10)),i}function untruncateYear(d){var e=parseInt(d,10);return e<=49?2e3+e:e<=999?1900+e:e}function preprocessRFC2822(d){return d.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function checkWeekday(d,e,s){return!d||defaultLocaleWeekdaysShort.indexOf(d)===new Date(e[0],e[1],e[2]).getDay()||(getParsingFlags(s).weekdayMismatch=!0,s._isValid=!1,!1)}function calculateOffset(d,e,s){if(d)return obsOffsets[d];if(e)return 0;var t=parseInt(s,10),r=t%100;return(t-r)/100*60+r}export function configFromRFC2822(d){var e,s=rfc2822.exec(preprocessRFC2822(d._i));if(s){if(e=extractFromRFC2822Strings(s[4],s[3],s[2],s[5],s[6],s[7]),!checkWeekday(s[1],e,d))return;d._a=e,d._tzm=calculateOffset(s[8],s[9],s[10]),d._d=createUTCDate.apply(null,d._a),d._d.setUTCMinutes(d._d.getUTCMinutes()-d._tzm),getParsingFlags(d).rfc2822=!0}else d._isValid=!1}export function configFromString(d){var e=aspNetJsonRegex.exec(d._i);null===e?(configFromISO(d),!1===d._isValid&&(delete d._isValid,configFromRFC2822(d),!1===d._isValid&&(delete d._isValid,d._strict?d._isValid=!1:hooks.createFromInputFallback(d)))):d._d=new Date(+e[1])}hooks.createFromInputFallback=deprecate("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(d){d._d=new Date(d._i+(d._useUTC?" UTC":""))}));